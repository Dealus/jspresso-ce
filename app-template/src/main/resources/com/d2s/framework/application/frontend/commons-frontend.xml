<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"
  default-lazy-init="true">

  <!--
    Test view description context.
  -->

  <!--
    View factories
  -->
  <bean id="lovViewDescriptorFactory" class="com.d2s.framework.view.descriptor.basic.BasicLovViewDescriptorFactory" />

  <!--
    Report descriptors
  -->
  <bean id="abstractReportDescriptor" abstract="true"
    class="com.d2s.framework.application.printing.model.descriptor.basic.BasicReportDescriptor">
    <constructor-arg index="0" value="com.d2s.framework.application.printing.model.descriptor.basic.IReportDescriptor" />
  </bean>
  <!--
    Root action beans.
  -->
  <!--
    Action beans.
  -->
  <bean id="abstractLovAction" abstract="true">
    <property name="lovViewDescriptorFactory" ref="lovViewDescriptorFactory" />
    <property name="createQueryEntityAction" ref="createQueryEntityAction" />
    <property name="okAction" ref="lovOkFrontAction" />
    <property name="cancelAction" ref="cancelDialogFrontAction" />
    <property name="findAction" ref="lovFindFrontAction" />
  </bean>

  <bean id="abstractLovFindFrontAction" abstract="true">
    <property name="wrappedAction" ref="queryEntitiesBackAction" />
  </bean>

  <bean id="abstractChooseComponentAction" abstract="true">
    <property name="cancelAction" ref="cancelDialogFrontAction" />
  </bean>

  <bean id="sourceViewConnectorSetAction"
    class="com.d2s.framework.application.frontend.action.std.SetConnectorValueAction">
    <property name="connectorActionContextKey" value="SOURCE_VIEW_CONNECTOR" />
  </bean>

  <bean id="abstractOpenFileAction" abstract="true">
    <property name="iconImageURL" value="classpath:images/open_file-48x48.png" />
    <property name="name" value="open.file.name" />
    <property name="description" value="open.file.description" />
  </bean>

  <bean id="abstractSaveFileAction" abstract="true">
    <property name="iconImageURL" value="classpath:images/save_file-48x48.png" />
    <property name="name" value="save.file.name" />
    <property name="description" value="save.file.description" />
  </bean>

  <bean id="abstractBinaryPropertyInfoAction" abstract="true">
    <property name="iconImageURL" value="classpath:images/info-48x48.png" />
    <property name="name" value="binary.info.name" />
    <property name="description" value="binary.info.description" />
  </bean>

  <bean id="abstractPrintAction" abstract="true"
    class="com.d2s.framework.application.printing.frontend.action.PrintAction">
    <property name="iconImageURL" value="classpath:images/print-48x48.png" />
    <property name="name" value="print.name" />
    <property name="description" value="print.description" />
    <property name="beanConnectorFactory" ref="beanConnectorFactory" />
    <property name="reportFactory" ref="reportFactory" />
    <property name="nextAction">
      <bean parent="chooseComponentAction">
        <property name="okAction" ref="printOkFrontAction" />
      </bean>
    </property>
  </bean>

  <bean id="abstractChooseActionAction" abstract="true"
    class="com.d2s.framework.application.frontend.action.flow.ChooseActionAction">
    <property name="beanConnectorFactory" ref="beanConnectorFactory" />
    <property name="nextAction">
      <bean parent="chooseComponentAction">
        <property name="okAction" ref="chooseActionOkFrontAction" />
      </bean>
    </property>
  </bean>

  <bean id="reportAction" class="com.d2s.framework.application.printing.frontend.action.ReportAction">
    <property name="iconImageURL" value="classpath:images/execute-48x48.png" />
    <property name="name" value="report.name" />
    <property name="description" value="report.description" />
    <property name="reportFactory" ref="reportFactory" />
    <property name="nextAction" ref="editReportParametersAction" />
  </bean>

  <bean id="abstractDoPrintAction" abstract="true">
    <property name="name" value="ok" />
    <property name="iconImageURL" value="classpath:images/print-48x48.png" />
    <property name="wrappedAction" ref="doPrintBackendAction" />
    <property name="nextAction" ref="displayReportAction" />
  </bean>

  <bean id="abstractEditReportParametersAction" abstract="true">
    <property name="modelConnectorFactory" ref="mapConnectorFactory" />
    <property name="okAction" ref="doPrintAction" />
    <property name="cancelAction" ref="cancelDialogFrontAction" />
  </bean>

  <bean id="abstractEditComponentAction" abstract="true">
    <property name="modelConnectorFactory" ref="beanConnectorFactory" />
    <property name="cancelAction" ref="cancelDialogFrontAction" />
  </bean>

  <bean id="abstractChangePasswordAction" abstract="true" parent="abstractEditComponentAction">
    <property name="name" value="password.change" />
    <property name="iconImageURL" value="classpath:images/password-48x48.png" />
    <property name="modelConnectorFactory" ref="mapConnectorFactory" />
    <property name="okAction">
      <bean parent="okDialogFrontAction">
        <property name="wrappedAction" ref="changePasswordBackAction" />
        <property name="nextAction" ref="infoFrontAction" />
      </bean>
    </property>
  </bean>

  <bean id="abstractWizardAction" abstract="true">
    <property name="name" value="wizard.name" />
    <property name="iconImageURL" value="classpath:images/wizard-48x48.png" />
    <property name="modelConnectorFactory" ref="mapConnectorFactory" />
  </bean>

  <bean id="connectorSelectionFrontAction"
    class="com.d2s.framework.application.frontend.action.ConnectorSelectionAction" />

  <bean id="moduleConnectorSelectionFrontAction"
    class="com.d2s.framework.application.frontend.action.module.ModuleConnectorSelectionAction" />

  <bean id="parentModuleConnectorSelectionFrontAction"
    class="com.d2s.framework.application.frontend.action.module.ParentModuleConnectorSelectionAction" />

  <bean id="scriptedBackAction" class="com.d2s.framework.application.backend.action.StaticScriptedBackendAction">
    <property name="scriptHandler" ref="scriptHandler" />
  </bean>

  <bean id="abstractAddToMasterFrontAction" abstract="true"
    class="com.d2s.framework.application.frontend.action.std.AddToMasterAction">
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.AddToMasterAction" />
    </property>
    <property name="nextAction" ref="connectorSelectionFrontAction" />
  </bean>

  <bean id="addToMasterFrontAction" parent="abstractAddToMasterFrontAction">
    <property name="iconImageURL" value="classpath:images/edit_add-48x48.png" />
    <!--
      <property name="mnemonicAsString" value="alt pressed A" />
    -->
    <property name="acceleratorAsString" value="alt A" />
  </bean>

  <bean id="cloneCollectionFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/edit_clone-48x48.png" />
    <property name="name" value="clone.name" />
    <property name="description" value="clone.description" />
    <property name="acceleratorAsString" value="alt C" />
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.CloneCollectionAction">
        <property name="entityCloneFactory" ref="smartEntityCloneFactory" />
      </bean>
    </property>
    <property name="nextAction" ref="connectorSelectionFrontAction" />
  </bean>

  <bean id="addToProjectedFrontAction" parent="addToMasterFrontAction">
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.module.AddToModuleObjectsAction" />
    </property>
    <property name="nextAction" ref="connectorSelectionFrontAction" />
  </bean>

  <bean id="abstractRemoveCollectionFromMasterFrontAction" abstract="true">
    <property name="iconImageURL" value="classpath:images/edit_remove-48x48.png" />
    <property name="name" value="remove.name" />
    <property name="description" value="remove.description" />
    <property name="acceleratorAsString" value="alt D" />
    <property name="messageCode" value="remove.selected.message" />
    <property name="yesAction" ref="removeCollectionFromMasterBackAction" />
  </bean>

  <bean id="removeFromProjectedFrontAction" parent="removeCollectionFromMasterFrontAction">
    <property name="yesAction" ref="removeFromModuleObjectsAction" />
  </bean>

  <bean id="cloneProjectedFrontAction" parent="cloneCollectionFrontAction">
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.module.CloneModuleObjectsAction">
        <property name="entityCloneFactory" ref="smartEntityCloneFactory" />
      </bean>
    </property>
    <property name="nextAction" ref="connectorSelectionFrontAction" />
  </bean>

  <bean id="addAsChildModuleFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/view-48x48.png" />
    <property name="name" value="installInTree.name" />
    <property name="description" value="installInTree.description" />
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.module.AddBeanAsSubModuleAction" />
    </property>
    <property name="nextAction" ref="moduleConnectorSelectionFrontAction" />
  </bean>

  <bean id="removeModuleFromParentFrontAction" parent="removeCollectionFromMasterFrontAction">
    <property name="yesAction">
      <bean class="com.d2s.framework.application.frontend.action.ActionWrapper">
        <property name="wrappedAction">
          <bean class="com.d2s.framework.application.backend.action.module.RemoveSubModuleFromParentAction" />
        </property>
        <property name="nextAction" ref="parentModuleConnectorSelectionFrontAction" />
      </bean>
    </property>
  </bean>

  <bean id="moveUpFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/up-48x48.png" />
    <property name="name" value="moveUp.name" />
    <property name="description" value="moveUp.description" />
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.CollectionElementMoveAction">
        <property name="offset" value="-1" />
      </bean>
    </property>
    <property name="nextAction" ref="connectorSelectionFrontAction" />
  </bean>

  <bean id="moveDownFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/down-48x48.png" />
    <property name="name" value="moveDown.name" />
    <property name="description" value="moveDown.description" />
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.CollectionElementMoveAction">
        <property name="offset" value="1" />
      </bean>
    </property>
    <property name="nextAction" ref="connectorSelectionFrontAction" />
  </bean>

  <bean id="resetPropertyFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/reset-48x48.png" />
    <property name="name" value="reset.name" />
    <property name="description" value="reset.description" />
    <property name="wrappedAction">
      <bean class="com.d2s.framework.application.backend.action.ResetConnectorValueAction" />
    </property>
  </bean>

  <!--
    Persistence action beans.
  -->
  <bean id="saveProjectedFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/save-48x48.png" />
    <property name="name" value="save.name" />
    <property name="description" value="save.description" />
    <property name="wrappedAction" ref="saveProjectedBackAction" />
    <property name="nextAction">
      <bean parent="staticInfoFrontAction">
        <property name="messageCode" value="save.successful" />
      </bean>
    </property>
  </bean>

  <bean id="reloadProjectedFrontAction" class="com.d2s.framework.application.frontend.action.ActionWrapper">
    <property name="iconImageURL" value="classpath:images/reload-48x48.png" />
    <property name="name" value="reload.name" />
    <property name="description" value="reload.description" />
    <property name="wrappedAction" ref="reloadProjectedBackAction" />
  </bean>

  <!--
    Action maps.
  -->
  <bean id="masterDetailActionMap" class="com.d2s.framework.view.action.ActionMap">
    <property name="actionMap">
      <map>
        <entry key="EDIT">
          <list>
            <ref local="addToMasterFrontAction" />
            <ref bean="removeCollectionFromMasterFrontAction" />
            <ref local="cloneCollectionFrontAction" />
          </list>
        </entry>
      </map>
    </property>
  </bean>

  <bean id="projectedReadonlyCollectionActionMap" class="com.d2s.framework.view.action.ActionMap">
    <property name="actionMap">
      <map>
        <entry key="FILE">
          <list>
            <ref local="saveProjectedFrontAction" />
            <ref local="reloadProjectedFrontAction" />
          </list>
        </entry>
        <entry key="SERVICE">
          <list>
            <ref local="addAsChildModuleFrontAction" />
          </list>
        </entry>
      </map>
    </property>
  </bean>

  <bean id="projectedEditableCollectionActionMap" class="com.d2s.framework.view.action.ActionMap">
    <property name="actionMap">
      <map>
        <entry key="FILE">
          <list>
            <ref local="saveProjectedFrontAction" />
            <ref local="reloadProjectedFrontAction" />
          </list>
        </entry>
        <entry key="EDIT">
          <list>
            <ref local="addToProjectedFrontAction" />
            <ref local="removeFromProjectedFrontAction" />
          </list>
        </entry>
        <entry key="SERVICE">
          <list>
            <ref local="addAsChildModuleFrontAction" />
          </list>
        </entry>
      </map>
    </property>
  </bean>

  <bean id="moduleActionMap" class="com.d2s.framework.view.action.ActionMap">
    <property name="actionMap">
      <map>
        <entry key="EDIT">
          <list>
            <ref local="removeModuleFromParentFrontAction" />
          </list>
        </entry>
      </map>
    </property>
  </bean>

  <bean id="projectedActionMap" class="com.d2s.framework.view.action.ActionMap">
    <property name="actionMap">
      <map>
        <entry key="FILE">
          <list>
            <ref local="saveProjectedFrontAction" />
            <ref local="reloadProjectedFrontAction" />
          </list>
        </entry>
      </map>
    </property>
  </bean>

  <bean id="binaryPropertyActionMap" class="com.d2s.framework.view.action.ActionMap">
    <property name="actionMap">
      <map>
        <entry key="FILE">
          <list>
            <ref bean="openFileAsBinaryPropertyAction" />
            <ref bean="saveBinaryPropertyAsFileAction" />
            <ref bean="resetPropertyFrontAction" />
            <ref bean="binaryPropertyInfoAction" />
          </list>
        </entry>
      </map>
    </property>
  </bean>

</beans>
